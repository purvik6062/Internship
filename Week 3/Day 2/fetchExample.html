<!--This file contains:
***reference: https://javascript.info/

Fetch 



***NOTE***
In arrow function we can avoid using curly braces and return as well...(as shown in example #2)
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <form id="myForm">
        Title <input type="text" id="titleText"> <br> <br>
        Body <input type="text" id="bodyText"> <br> <br>
        User Id <input type="text" id="userId"> <br> <br>
        <input type="submit" id="saveForm">
    </form>

    <script>
        "use strict";


// // #1: Normal

        // fetch("content/readme.txt").then((response1) => {
        //     // console.log(response1.text());       //it will show the Promise in console..    //keep it as commented
        //     return response1.text();
        // }).then((result1)=>{
        //     // // console.log(result1);           //Hello this is a text file. (in console)
        //     // document.write(result1);           //Hello this is a text file. (in document{browser})
        //     return result1;
        // });


// //#2: short using arrow function (works same as the #1 example)

        // fetch("content/readme.txt")
        // .then((response1) => response1.text())
        // .then((result2) => document.write(result2));


// //#3 example with JSON data:
        // fetch("https://jsonplaceholder.typicode.com/users")
        // .then(function(response3){
        //     // console.log(response3.json());
        //     return response3.json();
        // }).then(function(result3){
        //     console.log(result3);
        // }).catch(function(error){
        //     console.log(error);
        // });


// //#4 print data in document
        
        // fetch("https://jsonplaceholder.typicode.com/users")
        // .then(function(response1){
        //     return response1.json();
        // }).then(function(result1){
        //     console.log(result1);
        //     for(let i in result1){
        //         let a = `${result1[i].name} - ${result1[i].email} From ${result1[i].address.city} <br>`;
        //         document.write(a);
        //     }
        // });

// //#5 print data from local json document
        // fetch("json/student_data.json")
        // .then(function(response2){
        //     return response2.json();
        // }).then(function(result2){
        //     console.log(result2);
        //     for(let i in result2){
        //         document.write(`${result2[i].J.name} is ${result2[i].J.age} years old from ${result2[i].J.city}<br>`);
        //     }
        // }).catch(function(err){
        //     console.log(err)
        // });

// //#6 fetch - insert, update, delete
    // insert
        // let obj = {
        //     title: 'new',
        //     body: 'data',
        //     userId: 1,
        // }
        // fetch('https://jsonplaceholder.typicode.com/posts', {
        // method: 'POST',
        // body: JSON.stringify(obj),
        // headers: {
        //     'Content-type': 'application/json; charset=UTF-8',
        // },
        // })
        // .then((response) => response.json())
        // .then((json) => console.log(json));

    //update
        // let obj2 = {
        //     id: 1,
        //     title: 'new',
        //     body: 'data',
        //     userId: 1,
        // }
        // fetch('https://jsonplaceholder.typicode.com/posts/1', {
        // method: 'PUT',
        // body: JSON.stringify(obj2),
        // headers: {
        //     'Content-type': 'application/json; charset=UTF-8',
        // },
        // })
        // .then((response) => response.json())
        // .then((json) => console.log(json));

    //delete
        // fetch('https://jsonplaceholder.typicode.com/posts/1', {
        //     method: 'DELETE',
        // });

// // Form : (half code is in body)
    //using JSON:
        // document.getElementById("saveForm").addEventListener("click", function(event){
        //     event.preventDefault();
        //     let obj1 = {
        //         title: document.getElementById("titleText").value,
        //         body: document.getElementById("bodyText").value,
        //         userId: document.getElementById("userId").value
        //     };
        //     fetch('https://jsonplaceholder.typicode.com/posts', {
        //         method: 'POST',
        //         body: JSON.stringify(obj1),
        //         headers: {
        //             'content-type': 'application/json; charset=UTF-8',
        //         },
        //     })
        //         .then((response) => response.json())
        //         .then((result) => console.log(result));
        // })


// // Form : (half code is in body)
    //using FORM (FormData) direct, in which we don't need to create an object.. we just have to call the form id directly in the body of the fetch: {keep the comments as it is..}
        document.getElementById("saveForm").addEventListener("click", function(event){
            event.preventDefault();
            // let obj1 = {
            //     title: document.getElementById("titleText").value,
            //     body: document.getElementById("bodyText").value,
            //     userId: document.getElementById("userId").value
            // };
            fetch('https://jsonplaceholder.typicode.com/posts', {
                method: 'POST',
                body: new FormData(document.getElementById("myForm")),
                headers: {
                    'content-type': 'Content-Type: multipart/form-data; boundary=something',
                },
            })
                .then((response) => response.json())
                .then((result) => console.log(result));
        })
        



    </script>
</body>
</html>